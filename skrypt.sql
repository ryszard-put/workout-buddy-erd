CREATE TABLE IF NOT EXISTS `Users` (`user_id` INTEGER auto_increment , `provider` VARCHAR(10) NOT NULL, `disabled` TINYINT(1) NOT NULL DEFAULT false, `completed` TINYINT(1) NOT NULL DEFAULT false, `role` INTEGER NOT NULL DEFAULT 0, `height` FLOAT(5,2), `sex` VARCHAR(1), `date_of_birth` DATETIME, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`user_id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `GithubUsers` (`github_id` INTEGER , `username` VARCHAR(50) NOT NULL, `avatar_url` VARCHAR(100), `email` VARCHAR(50), `user_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`github_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `GoogleUsers` (`google_id` VARCHAR(30) , `display_name` VARCHAR(50) NOT NULL, `family_name` VARCHAR(50) NOT NULL, `given_name` VARCHAR(50) NOT NULL, `avatar_url` VARCHAR(100), `email` VARCHAR(50), `user_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`google_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `FacebookUsers` (`facebook_id` VARCHAR(30) , `display_name` VARCHAR(50) NOT NULL, `family_name` VARCHAR(50) NOT NULL, `given_name` VARCHAR(50) NOT NULL, `avatar_url` VARCHAR(100), `email` VARCHAR(50), `user_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`facebook_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `LocalUsers` (`local_id` INTEGER auto_increment , `username` VARCHAR(50) NOT NULL, `avatar_url` VARCHAR(100), `email` VARCHAR(50) NOT NULL, `password` VARCHAR(128) NOT NULL, `salt` VARCHAR(12) NOT NULL, `user_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`local_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `BodyMeasurements` (`measurement_id` INTEGER auto_increment , `weight` FLOAT(5,2) NOT NULL, `water_percentage` FLOAT(5,2), `body_fat` FLOAT(5,2), `visceral_fat` INTEGER, `muscle` FLOAT(5,2), `bone_mass` FLOAT(5,2), `user_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`measurement_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `Exercises` (`exercise_id` INTEGER auto_increment , `name` VARCHAR(50) NOT NULL, `description` VARCHAR(300), `version` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`exercise_id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `Muscles` (`muscle_id` INTEGER auto_increment , `name` VARCHAR(50) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`muscle_id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `Comments` (`comment_id` INTEGER auto_increment , `content` VARCHAR(300) NOT NULL, `user_id` INTEGER NOT NULL, `exercise_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`comment_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`exercise_id`) REFERENCES `Exercises` (`exercise_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `ExerciseCategories` (`category_id` INTEGER auto_increment , `name` VARCHAR(50) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`category_id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `ExerciseImages` (`image_id` INTEGER auto_increment , `url` VARCHAR(50) NOT NULL, `is_main` TINYINT(1) NOT NULL, `exercise_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`image_id`), FOREIGN KEY (`exercise_id`) REFERENCES `Exercises` (`exercise_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `Equipment` (`equipment_id` INTEGER auto_increment , `name` VARCHAR(50) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`equipment_id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `ExerciseAndEquipments` (`exercise_id` INTEGER NOT NULL , `equipment_id` INTEGER NOT NULL , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, UNIQUE `ExerciseAndEquipments_equipment_id_exercise_id_unique` (`exercise_id`, `equipment_id`), PRIMARY KEY (`exercise_id`, `equipment_id`), FOREIGN KEY (`exercise_id`) REFERENCES `Exercises` (`exercise_id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`equipment_id`) REFERENCES `Equipment` (`equipment_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `ExerciseAndMuscles` (`exercise_id` INTEGER NOT NULL , `muscle_id` INTEGER NOT NULL , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, UNIQUE `ExerciseAndMuscles_muscle_id_exercise_id_unique` (`exercise_id`, `muscle_id`), PRIMARY KEY (`exercise_id`, `muscle_id`), FOREIGN KEY (`exercise_id`) REFERENCES `Exercises` (`exercise_id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`muscle_id`) REFERENCES `Muscles` (`muscle_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `ExerciseAndExerciseCategories` (`exercise_id` INTEGER NOT NULL , `category_id` INTEGER NOT NULL , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, UNIQUE `ExerciseAndExerciseCategories_category_id_exercise_id_unique` (`exercise_id`, `category_id`), PRIMARY KEY (`exercise_id`, `category_id`), FOREIGN KEY (`exercise_id`) REFERENCES `Exercises` (`exercise_id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`category_id`) REFERENCES `ExerciseCategories` (`category_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `WorkoutBlueprints` (`blueprint_id` INTEGER auto_increment , `name` VARCHAR(50) NOT NULL, `description` VARCHAR(300) NOT NULL, `color` VARCHAR(20) NOT NULL, `user_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`blueprint_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `ExerciseGroups` (`group_id` INTEGER auto_increment , `order` INTEGER NOT NULL, `name` VARCHAR(50), `blueprint_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`group_id`), FOREIGN KEY (`blueprint_id`) REFERENCES `WorkoutBlueprints` (`blueprint_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `WorkoutLogs` (`log_id` INTEGER auto_increment , `name` VARCHAR(50) NOT NULL, `user_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`log_id`), FOREIGN KEY (`user_id`) REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `ExerciseAndExcerciseGroups` (`junction_id` INTEGER auto_increment , `in_exercise_order` INTEGER NOT NULL, `exercise_id` INTEGER NOT NULL, `group_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`junction_id`), FOREIGN KEY (`exercise_id`) REFERENCES `Exercises` (`exercise_id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`group_id`) REFERENCES `ExerciseGroups` (`group_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `SetLogs` (`set_id` INTEGER auto_increment , `in_exercise_order` INTEGER NOT NULL, `repetitions` INTEGER NOT NULL, `value` INTEGER NOT NULL, `unit` VARCHAR(10) NOT NULL, `log_id` INTEGER NOT NULL, `junction_id` INTEGER NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`set_id`), FOREIGN KEY (`log_id`) REFERENCES `WorkoutLogs` (`log_id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`junction_id`) REFERENCES `ExerciseAndExcerciseGroups` (`junction_id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;